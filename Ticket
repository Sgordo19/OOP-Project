package Final_Project;

import java.util.Date;

public class Ticket {
    private String ticketnumber;
    private Date issuedate;
    private String offencecode;
    private String offencedescription;
    private float fineamount;
    private String vehiclePlateNumber;
    private Driver driver;
    private JCF_Officer officer;

    // Constructor
    public Ticket(String ticketnumber, Date issuedate, String offencecode, String offencedescription, float fineamount, String vehiclePlateNumber, Driver driver, JCF_Officer officer) {
        this.ticketnumber = ticketnumber;
        this.issuedate = issuedate;
        this.offencecode = offencecode;
        this.offencedescription = offencedescription;
        this.fineamount = fineamount;
        this.vehiclePlateNumber = vehiclePlateNumber;
        this.driver = driver;
        this.officer = officer;
    }

    // Copy constructor
    public Ticket(Ticket tic) {
        ticketnumber = tic.ticketnumber;
        issuedate = tic.issuedate;
        offencecode = tic.offencecode;
        offencedescription = tic.offencedescription;
        fineamount = tic.fineamount;
        vehiclePlateNumber = tic.vehiclePlateNumber;
        driver = tic.driver;
        officer = tic.officer;
    }

    // Getter and setter methods
    public String getTicketnumber() {
        return ticketnumber;
    }

    public void setTicketnumber(String ticketnumber) {
        this.ticketnumber = ticketnumber;
    }

    public Date getIssuedate() {
        return issuedate;
    }

    public void setIssuedate(Date issuedate) {
        this.issuedate = issuedate;
    }

    public String getOffencecode() {
        return offencecode;
    }

    public void setOffencecode(String offencecode) {
        this.offencecode = offencecode;
    }

    public String getOffencedescription() {
        return offencedescription;
    }

    public void setOffencedescription(String offencedescription) {
        this.offencedescription = offencedescription;
    }

    public float getFineamount() {
        return fineamount;
    }

    public void setFineamount(float fineamount) {
        this.fineamount = fineamount;
    }

    public String getVehiclePlateNumber() {
        return vehiclePlateNumber;
    }

    public void setVehiclePlateNumber(String vehiclePlateNumber) {
        this.vehiclePlateNumber = vehiclePlateNumber;
    }

    public Driver getDriver() {
        return driver;
    }

    public void setDriver(Driver driver) {
        this.driver = driver;
    }

    public JCF_Officer getOfficer() {
        return officer;
    }

    public void setOfficer(JCF_Officer officer) {
        this.officer = officer;
    }

   // Methods
    if (payment < fineAmount) {
            fineAmount -= payment; // Reduce balance
            System.out.println("Payment accepted. Ticket still unpaid. Remaining balance: $" + fineAmount);
            return false; // Ticket is still unpaid
        } else {
            fineAmount = 0;
            status = "Paid"; // Mark ticket as fully paid
            System.out.println("Payment accepted. Ticket paid in full.");
            return true; // Ticket is fully paid
}

    // 2. Check the ticket status
    public void checkTicketStatus() {
        System.out.println("Ticket Status for " + ticketNumber + ":");
        System.out.println("Status: " + status);
        if ("Unpaid".equalsIgnoreCase(status) && dueDate.before(new Date())) {
            System.out.println("The ticket is overdue.");
            if (courtDate != null) {
                SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
                System.out.println("Court Date: " + dateFormat.format(courtDate));
            }
        } else if ("Unpaid".equalsIgnoreCase(status)) {
            SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
            System.out.println("Due Date: " + dateFormat.format(dueDate));
        }
    }

    // 3. Issue the ticket
    public static Ticket issueTicket(String ticketNumber, String offenceCode, String description, double fineAmount, Date issueDate, int dueInDays) {
        Date dueDate = new Date(issueDate.getTime() + (dueInDays * 24L * 60L * 60L * 1000L)); // Calculate due date
        return new Ticket(ticketNumber, offenceCode, description, fineAmount, issueDate, dueDate);
    }

    // Display ticket details
    public void displayTicketDetails() {
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
        System.out.println("Ticket Number: " + ticketNumber);
        System.out.println("Offence Code: " + offenceCode);
        System.out.println("Description: " + description);
        System.out.println("Fine Amount: $" + fineAmount);
        System.out.println("Issue Date: " + dateFormat.format(issueDate));
        System.out.println("Due Date: " + dateFormat.format(dueDate));
        System.out.println("Status: " + status);
        if (courtDate != null) {
            System.out.println("Court Date: " + dateFormat.format(courtDate));
        }
        System.out.println("---------------------------");
    }
}
